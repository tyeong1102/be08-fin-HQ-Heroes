<div align="center">
  <img src="https://capsule-render.vercel.app/api?type=waving&height=200&color=gradient&text=HQ%20-%20HeRoes&section=header&reversal=false&fontAlign=50&fontAlignY=40" width="100%">
</div>

<div align="center">
  <h3>Hanwha Systems BEYOND SW Camp Final Project - Team HQ</h3>
  <h3>👨‍💻 HR Management System - HeRoes 👨‍💻</h3>
</div>

## 🧑‍💻 Team Members
<br>
<div align="center">
<br>
<table>
  <tbody>
    <tr> 
      <td align="center"><a href="https://github.com/jongwon-kr"><img src="https://avatars.githubusercontent.com/u/76871947?v=4"width="140px;" height="140px" alt=""/><br /><b>👑김종원</b></a><br /></td>
      <td align="center"><a href="https://github.com/tyeong1102"><img src="https://avatars.githubusercontent.com/u/97294927?s=96&v=4" width="140px;" height="140px" alt=""/><br /><b>🍙김태영</b></a><br /></td>
      <td align="center"><a href="https://github.com/tkckdnjs"><img src="https://avatars.githubusercontent.com/u/170069568?v=4" width="140px;" height="140px"  alt=""/><br /><b>🐶이은서</b></a><br /></td>
      <td align="center"><a href="https://github.com/eunhee78"><img src="https://avatars.githubusercontent.com/u/82626246?v=4" width="140px;" height="140px" alt=""/><br /><b>🍉조은희</b></a><br /></td>
      <td align="center"><a href="https://github.com/mmvne"><img src="https://avatars.githubusercontent.com/u/45449480?v=4" width="140px;" height="140px" alt=""/><br /><b>🧁홍석민</b></a><br /></td>
  </tbody>
</table>
</div>

<br>

## 🛠️ Tech Stack

### FrontEnd
<div>
  <img src="https://img.shields.io/badge/HTML5-%23E34F26?style=for-the-badge&logo=html5&logoColor=white">
  <img src="https://img.shields.io/badge/CSS3-%231572B6?style=for-the-badge&logo=css3&logoColor=white">
  <img src="https://img.shields.io/badge/JavaScript-%23F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
  <img src="https://img.shields.io/badge/Vue.js-%234FC08D?style=for-the-badge&logo=vuedotjs&logoColor=white">
  <img src="https://img.shields.io/badge/Vite-%23646CFF?style=for-the-badge&logo=vite&logoColor=white">
  <img src="https://img.shields.io/badge/PrimeVue-%23009c5d?style=for-the-badge&logo=vue.js&logoColor=white">
</div>

### BackEnd
<div>
  <img src="https://img.shields.io/badge/Java-%23ED8B00?style=for-the-badge&logo=openjdk&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Boot-%236DB33F?style=for-the-badge&logo=springboot&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Security-%236DB33F?style=for-the-badge&logo=springsecurity&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Data%20JPA-%236DB33F?style=for-the-badge&logo=spring&logoColor=white">
  <img src="https://img.shields.io/badge/Spring%20Batch-%236DB33F?style=for-the-badge&logo=spring&logoColor=white">
  <img src="https://img.shields.io/badge/Gradle-%2302303A?style=for-the-badge&logo=gradle&logoColor=white">
</div>

### DataBase
<div>
  <img src="https://img.shields.io/badge/MariaDB-%23003545?style=for-the-badge&logo=mariadb&logoColor=white">
  <img src="https://img.shields.io/badge/Redis-%23DC382D?style=for-the-badge&logo=redis&logoColor=white">
</div>

### CI/CD
<div>
  <img src="https://img.shields.io/badge/Jenkins-%23D24939?style=for-the-badge&logo=jenkins&logoColor=white">
  <img src="https://img.shields.io/badge/ArgoCD-%23F85050?style=for-the-badge&logo=argo&logoColor=white">
  <img src="https://img.shields.io/badge/Docker-%232496ED?style=for-the-badge&logo=docker&logoColor=white">
  <img src="https://img.shields.io/badge/Kubernetes-%23326CE5?style=for-the-badge&logo=kubernetes&logoColor=white">
</div>

### Infrastructure
<div>
  <img src="https://img.shields.io/badge/AWS-%23FF9900?style=for-the-badge&logo=amazonaws&logoColor=white">
  <img src="https://img.shields.io/badge/EKS-%23FF9900?style=for-the-badge&logo=kubernetes&logoColor=white">
  <img src="https://img.shields.io/badge/EC2-%23FF9900?style=for-the-badge&logo=amazonec2&logoColor=white">
  <img src="https://img.shields.io/badge/ECR-%23FF9900?style=for-the-badge&logo=docker&logoColor=white">
  <img src="https://img.shields.io/badge/Route%2053-%23FF9900?style=for-the-badge&logo=amazonroute53&logoColor=white">
  <img src="https://img.shields.io/badge/RDS-%23FF9900?style=for-the-badge&logo=amazonrds&logoColor=white">
  <img src="https://img.shields.io/badge/Firebase-%23FFCA28?style=for-the-badge&logo=firebase&logoColor=black">
</div>

### Version Control
<div>
  <img src="https://img.shields.io/badge/Git-%23F05032?style=for-the-badge&logo=git&logoColor=white">
  <img src="https://img.shields.io/badge/SourceTree-%230052CC?style=for-the-badge&logo=sourcetree&logoColor=white">
</div>

### Tools
<div>
  <img src="https://img.shields.io/badge/Notion-%23000000?style=for-the-badge&logo=notion&logoColor=white">
  <img src="https://img.shields.io/badge/Google%20Docs-%234285F4?style=for-the-badge&logo=googledocs&logoColor=white">
  <img src="https://img.shields.io/badge/GitHub-%23181717?style=for-the-badge&logo=github&logoColor=white">
  <img src="https://img.shields.io/badge/IntelliJ%20IDEA-%23000000?style=for-the-badge&logo=intellij-idea&logoColor=white">
  <img src="https://img.shields.io/badge/VS%20Code-%23007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white">
  <img src="https://img.shields.io/badge/Discord-%235865F2?style=for-the-badge&logo=discord&logoColor=white">
</div>

<br>

## 🔆 Project Overview & Expected Effects

The **HeRoes** project is an HR management system designed to automate payroll based on employee attendance data.  
Its goal is to reduce human errors during payroll calculations and save time on manual processing.  
It also aims to improve employee satisfaction by offering a team calendar for schedule visibility and a platform for company training and events.

- From analog to automated: Improves overall efficiency
- Eliminates missed communications for important updates
- Provides educational resources to improve employee competency

<br>

## 📑 Project Proposal


[Project Proposal](https://playdatacademy.notion.site/bdf4d060b31a4555b9fb00ef0f98bbfc)


<br>

## 📑 Requirements Specification 


[Requirements Specification ](https://docs.google.com/spreadsheets/d/1I81YiEOdhIkn-6CAHCcOTzliay9jMC2x0q_v7nGALVs/edit?usp=sharing)


<br>

## 📅 WBS (Work Breakdown Structure) 

[WBS](https://docs.google.com/spreadsheets/d/11uxzOc_F1XGaa-jF9gtnNzzb2FqxmP_m8B-FbtFqEb8/edit?gid=0#gid=0)

<br>

## 📋 ERD

[ERD](https://www.erdcloud.com/d/8E4tc7rcJ3nv7s2pq)

<br>

## 📺 UI Wireframes 

[UI Wireframes](https://www.figma.com/board/gluKEJsk3zgrZrrMgvBh7U/HeRoes-화면-설계서?node-id=0-1&t=r8PfiIedMNaRsowv-1)

<br>

## 📄 API Documentation

[API Documentation](https://playdatacademy.notion.site/API-5b7e16a67c6e407ea0e5035153c6bc88?pvs=4)

<br>

## 📜 Test Scenarios

[Test Scenarios](https://docs.google.com/spreadsheets/d/10T3jsm3aS-NS-D-3E92f18xkcve6frEbmGwcAcYbNQg/edit?gid=0#gid=0)

<br>

## 📈 Unit Test Results

[Unit Test Results](https://docs.google.com/spreadsheets/d/16IVL1Zvi8nouXRf0L8f5Z_AEXyXcuqNTStf0ODIuzrc/edit?gid=0#gid=0)

<br>

## 🎨 UI/UX Test Report

[UI/UX Test Report](https://docs.google.com/spreadsheets/d/1p2S1Dx_Czk0cFEXHtt2w0ZFetm8syJea9jIj2o6hSeE/edit?gid=0#gid=0)

<br>

## 📑 System Architecture 
![System Architecture](https://github.com/user-attachments/assets/987dc595-7efb-4ef7-9006-bd64d40930aa)
<br>

<br>

## 📑 Integration Testing 
[Integration Testing](https://www.notion.so/playdatacademy/69a4e1b2079546d1bf5a0f56214882fc)

<br>

## 📑 CI/CD Plan 
[CI/CD Plan](https://www.notion.so/playdatacademy/CI-CD-e63235a2c456455f9852ae393fd53e67)

<br>

## 🚀 CI/CD Pipeline Overview

This **CI/CD pipeline** automates application deployment in AWS infrastructure.  
It combines **Jenkins** (for Continuous Integration) and **ArgoCD** (for Continuous Deployment)  
to create a fast, scalable, and reliable deployment flow.

### 🌐 CI/CD Environment Overview

- **AWS EKS**: Hosts the web application and ArgoCD server
- **AWS EC2**: Hosts the Jenkins server
- **AWS ECR**: Stores and manages Docker images

### 📈 CI/CD Pipeline Flow

1. **Developer pushes code to the `main` branch on GitHub**: This triggers the CI pipeline via a webhook
2. **Jenkins detects code changes**: Pulls the updated code from GitHub and builds the application
3. **Pushes Docker image to AWS ECR**: The built image is pushed to the container registry
4. **Updates deployment files for ArgoCD**: Updates image tags and pushes the changes to GitHub
5. **ArgoCD auto-deploys**: Detects changes in the GitHub repository and performs automated or manual deployment

### ⚙️ Jenkins CI Stages

<details>
	<summary>1. Environment Variable Setup</summary>
	
	Sets environment variables used throughout the Jenkins pipeline:
	
	- `AWS_REGION`: AWS region (e.g., ap-northeast-2)  
	- `ECR_REGISTRY`: ECR registry address  
	- `FRONTEND_REPOSITORY`: Frontend Docker image repository  
	- `BACKEND_REPOSITORY`: Backend Docker image repository  
	- `FRONTEND_IMAGE_TAG`: Frontend image tag  
	- `BACKEND_IMAGE_TAG`: Backend image tag  
</details>

<details>
	<summary>2. Checkout Stage</summary>

	Checks out the `main` branch from GitHub using the specified credentials (`github-https-credentials`).
	
 	git branch: 'main', url: 'https://github.com/beyond-sw-camp/be08-fin-HQ-Heroes.git', credentialsId: 'github-https-credentials'
</details>

<details>
	<summary>3. Determine Changes Stage</summary>

	1. Uses `git diff` to identify file changes between the latest commit and the current one.  
	2. If files within the `Frontend/` or `Backend/Heroes/` directories have changed,  
	   the corresponding build steps for each area are triggered.

 	def changedFiles = sh(script: 'git diff --name-only HEAD~1', returnStdout: true).trim().split("\n")
	env.BUILD_FRONTEND = changedFiles.any { it.startsWith("Frontend/") } ? "true" : "false"
	env.BUILD_BACKEND = changedFiles.any { it.startsWith("Backend/Heroes/") } ? "true" : "false"
</details>

<details>
	<summary>4. Build Backend Docker Image Stage</summary>

	1. Navigates to the `Backend/Heroes` directory and builds the backend project using Gradle (`./gradlew clean bootJar`).  
	2. Builds a Docker image using the provided `Dockerfile`.

 	dir('Backend/Heroes') {
	    sh 'chmod +x ./gradlew'
	    sh './gradlew clean bootJar'
	    sh "docker build -t ${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG} -f Dockerfile ."
	}
</details>

<details>
	<summary>5. Push Backend to ECR Stage</summary>

	1. Logs in to AWS ECR using the AWS CLI.  
	2. Pushes the built backend Docker image to the ECR repository.

 	sh "aws ecr get-login-password --region ${AWS_REGION} | docker login --username AWS --password-stdin ${ECR_REGISTRY}"
	sh "docker tag ${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG} ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}"
	sh "docker push ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}"
</details>

<details>
	<summary>6. Build Frontend Docker Image Stage</summary>

	Navigates to the `Frontend` directory and builds the frontend Docker image.

 	dir('Frontend') {
	    sh "docker build -t ${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG} -f Dockerfile ."
	}
</details>

<details>
	<summary>7. Push Frontend to ECR Stage</summary>

	Pushes the built frontend Docker image to AWS ECR.

 	sh "docker tag ${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG} ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}"
	sh "docker push ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}"
</details>

<details>
	<summary>8. Update ArgoCD Stage</summary>

	1. Updates the image tags in the Kubernetes deployment files (`heroes-frontend-deploy.yaml`, `heroes-deploy.yaml`).  
	2. Commits and pushes the updated files to GitHub so that ArgoCD can automatically detect the changes and deploy the updated containers.

 	def frontendFilePath = 'k8s/heroes/heroes-frontend-deploy.yaml'
	def backendFilePath = 'k8s/heroes/heroes-deploy.yaml'
	
	if (env.BUILD_FRONTEND == "true") {
	    sh 'sed -i "s|image:.*frontend-repo:.*|image: ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}|g" ' + frontendFilePath
	}
	if (env.BUILD_BACKEND == "true") {
	    sh 'sed -i "s|image:.*backend-repo:.*|image: ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}|g" ' + backendFilePath
	}
	
	withCredentials([usernamePassword(credentialsId: 'github-https-credentials', usernameVariable: 'GIT_USERNAME', passwordVariable: 'GIT_PASSWORD')]) {
	    sh 'git add .'
	    sh 'git commit -m "Update image tags for frontend and backend with latest build" || echo "Nothing to commit, images may be up-to-date."'
	    sh 'git push https://${GIT_USERNAME}:${GIT_PASSWORD}@github.com/beyond-sw-camp/be08-fin-HQ-Heroes.git main'
	}
</details>

<details>
	<summary>9. Post Actions</summary>

	- **On success**: Sends a success message via Discord webhook, including build details and image info.  
	- **On failure**: Sends a failure notification via Discord webhook as well.

 	discordSend description: "ArgoCD 배포 파이프라인이 성공적으로 완료되었습니다.\n\n" +
             "**Build ID**: ${BUILD_ID}\n" +
             "**Frontend Image**: ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}\n" +
             "**Backend Image**: ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}\n" +
             "**소요 시간**: ${currentBuild.durationString}",
             footer: "빌드 성공: ${currentBuild.displayName}",
             link: env.BUILD_URL,
             result: currentBuild.currentResult,
             title: "Jenkins 빌드 성공",
             webhookURL: "YOUR_DISCORD_WEBHOOK_URL"
</details>

### 📄 Full Jenkinsfile Code
<details>
	<summary>Code</summary>

	pipeline {
	    agent any
	    environment {
	        AWS_REGION = 'ap-northeast-2'
	        ECR_REGISTRY = '774305581884.dkr.ecr.ap-northeast-2.amazonaws.com' // 실제 계정 ID로 수정
	        FRONTEND_REPOSITORY = 'frontend-repo'
	        BACKEND_REPOSITORY = 'backend-repo'
	        FRONTEND_IMAGE_TAG = "${BUILD_ID}-frontend"
	        BACKEND_IMAGE_TAG = "${BUILD_ID}-backend"
	    }
	    stages {
	        stage('Checkout') {
	            steps {
	                git branch: 'main', url: 'https://github.com/beyond-sw-camp/be08-fin-HQ-Heroes.git', credentialsId: 'github-https-credentials'
	            }
	        }
	
	        stage('Determine Changes') {
	            steps {
	                script {
	                    def changedFiles = sh(script: 'git diff --name-only HEAD~1', returnStdout: true).trim().split("\n")
	                    env.BUILD_FRONTEND = changedFiles.any { it.startsWith("Frontend/") } ? "true" : "false"
	                    env.BUILD_BACKEND = changedFiles.any { it.startsWith("Backend/Heroes/") } ? "true" : "false"
	                }
	            }
	        }
	
	        stage('Build Backend Docker Image') {
	            when {
	                expression { env.BUILD_BACKEND == "true" }
	            }
	            steps {
	                dir('Backend/Heroes') {  
	                    script {
	                        sh 'chmod +x ./gradlew'
	                        sh './gradlew clean bootJar'
	                        sh "docker build -t ${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG} -f Dockerfile ."
	                    }
	                }
	            }
	        }
	        
	        stage('Push Backend to ECR') {
	            when {
	                expression { env.BUILD_BACKEND == "true" }
	            }
	            steps {
	                script {
	                    sh "aws ecr get-login-password --region ${AWS_REGION} | docker login --username AWS --password-stdin ${ECR_REGISTRY}"
	                    sh "docker tag ${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG} ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}"
	                    sh "docker push ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}"
	                }
	            }
	        }
	
	        stage('Build Frontend Docker Image') {
	            when {
	                expression { env.BUILD_FRONTEND == "true" }
	            }
	            steps {
	                dir('Frontend') {  
	                    script {
	                        sh "docker build -t ${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG} -f Dockerfile ."
	                    }
	                }
	            }
	        }
	        
	        stage('Push Frontend to ECR') {
	            when {
	                expression { env.BUILD_FRONTEND == "true" }
	            }
	            steps {
	                script {
	                    sh "docker tag ${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG} ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}"
	                    sh "docker push ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}"
	                }
	            }
	        }
	
	        stage('Update ArgoCD') {
	            when {
	                anyOf {
	                    expression { env.BUILD_FRONTEND == "true" }
	                    expression { env.BUILD_BACKEND == "true" }
	                }
	            }
	            steps {
	                script {
	                    def frontendFilePath = 'k8s/heroes/heroes-frontend-deploy.yaml'
	                    def backendFilePath = 'k8s/heroes/heroes-deploy.yaml'
	
	                    // 현재 파일 상태를 확인하기 위해 출력
	                    sh 'echo "Before Update:"'
	                    sh 'cat ' + frontendFilePath
	                    sh 'cat ' + backendFilePath
	
	                    // 이미지 태그 변경 작업
	                    if (env.BUILD_FRONTEND == "true") {
	                        sh 'echo "Updating frontend image tag in heroes-frontend-deploy.yaml"'
	                        sh 'sed -i "s|image:.*frontend-repo:.*|image: ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}|g" ' + frontendFilePath
	                    }
	                    if (env.BUILD_BACKEND == "true") {
	                        sh 'echo "Updating backend image tag in heroes-deploy.yaml"'
	                        sh 'sed -i "s|image:.*backend-repo:.*|image: ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}|g" ' + backendFilePath
	                    }
	
	                    // sed 명령 실행 후 변경 사항 확인
	                    sh 'echo "After Update:"'
	                    sh 'cat ' + frontendFilePath
	                    sh 'cat ' + backendFilePath
	
	                    // 항상 커밋 및 푸시 수행
	                    withCredentials([usernamePassword(credentialsId: 'github-https-credentials', usernameVariable: 'GIT_USERNAME', passwordVariable: 'GIT_PASSWORD')]) {
	                        sh 'git config user.name "growjong8802"'
	                        sh 'git config user.email "growjong8802@gmail.com"'
	                        
	                        // 변경된 파일을 Git에 추가 및 커밋
	                        sh 'git add .'
	                        sh 'git commit -m "Update image tags for frontend and backend with latest build" || echo "Nothing to commit, images may be up-to-date."'
	                        sh 'git push https://${GIT_USERNAME}:${GIT_PASSWORD}@github.com/beyond-sw-camp/be08-fin-HQ-Heroes.git main'
	                    }
	                }
	            }
	        }
	
	    }
	    
	    post {
	        success {
	            discordSend description: "ArgoCD 배포 파이프라인이 성공적으로 완료되었습니다.\n\n" +
	                        "**Build ID**: ${BUILD_ID}\n" +
	                        "**Frontend Image**: ${ECR_REGISTRY}/${FRONTEND_REPOSITORY}:${FRONTEND_IMAGE_TAG}\n" +
	                        "**Backend Image**: ${ECR_REGISTRY}/${BACKEND_REPOSITORY}:${BACKEND_IMAGE_TAG}\n" +
	                        "**소요 시간**: ${currentBuild.durationString}",
	                footer: "빌드 성공: ${currentBuild.displayName}",
	                link: env.BUILD_URL,
	                result: currentBuild.currentResult,
	                title: "Jenkins 빌드 성공",
	                webhookURL: "https://discord.com/api/webhooks/1303826751524311123/kKGqHJkVMapV1i_TrPuUYlRVVRcCiXtjGC4PeRLq_H5hfi44IcleIwdPFPVS6vZg8TA6"
	        }
	        
	        failure {
	            discordSend description: "ArgoCD 배포 파이프라인이 실패했습니다.\n\n" +
	                        "**Build ID**: ${BUILD_ID}\n" +
	                        "**소요 시간**: ${currentBuild.durationString}",
	                footer: "빌드 실패: ${currentBuild.displayName}",
	                link: env.BUILD_URL,
	                result: currentBuild.currentResult,
	                title: "Jenkins 빌드 실패",
	                webhookURL: "https://discord.com/api/webhooks/1303826751524311123/kKGqHJkVMapV1i_TrPuUYlRVVRcCiXtjGC4PeRLq_H5hfi44IcleIwdPFPVS6vZg8TA6"
	        }
	    }
	}
</details>


<br>

## ▶️ CICD Test(Jenkinsfile)
[CI/CD 테스트 영상](https://www.youtube.com/watch?v=VdlhfOg5f_k)

<br>

## ▶️ 시연 영상

[기능 시연 영상](https://youtu.be/Sv748E1-wsU?si=XH_mQM_Ktn3sHU9r)

<br>
